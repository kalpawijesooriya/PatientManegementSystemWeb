<div  style="background:#e6eaea;margin-left: 250px; margin-right: 50px; height:607PX;width:83.5%;">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Learn how to use the Firebase platform on the Web">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <style>
            table tr:not(:first-child){
                cursor: pointer;transition: all .25s ease-in-out;
            }
            table tr:not(:first-child):hover{background-color: #ddd;}
     </style>
    <!-- Disable tap highlight on IE -->
    <meta name="msapplication-tap-highlight" content="no">

    <!-- Web Application Manifest -->
    <link rel="manifest" href="manifest.json">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Friendly Chat">
    <meta name="theme-color" content="#303F9F">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Friendly Chat">
    <meta name="apple-mobile-web-app-status-bar-style" content="#303F9F">

    <!-- Tile icon for Win8 -->
    <meta name="msapplication-TileColor" content="#3372DF">
    <meta name="msapplication-navbutton-color" content="#303F9F">

    <!-- Material Design Lite -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.1.3/material.orange-indigo.min.css">
    <script defer src="https://code.getmdl.io/1.1.3/material.min.js"></script>

    <!-- App Styling -->
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600,700,300' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/chatnew.css">
    <link rel="stylesheet" href="css/chat.css">
 
   
  </head>

     <div id="frame">
        <div id="sidepanel">
          <div id="profile">
            <div class="wrap">
              <img id="profile-img" src="https://image.flaticon.com/icons/png/128/149/149071.png"  class="online" alt="" />
              <p id="user">Kalpa</p>
              <i class="fa fa-chevron-down expand-button" aria-hidden="true"></i>
              <div id="status-options">
                <ul>
                  <li id="status-online" class="active"><span class="status-circle"></span> <p>Online</p></li>
                  <li id="status-away"><span class="status-circle"></span> <p>Away</p></li>
                  <li id="status-busy"><span class="status-circle"></span> <p>Busy</p></li>
                  <li id="status-offline"><span class="status-circle"></span> <p>Offline</p></li>
                </ul>
              </div>
              <div id="expanded">
                <label for="twitter"><i class="fa fa-facebook fa-fw" aria-hidden="true"></i></label>
                <input name="twitter" type="text" value="mikeross" />
                <label for="twitter"><i class="fa fa-twitter fa-fw" aria-hidden="true"></i></label>
                <input name="twitter" type="text" value="ross81" />
                <label for="twitter"><i class="fa fa-instagram fa-fw" aria-hidden="true"></i></label>
                <input name="twitter" type="text" value="mike.ross" />
              </div>
            </div>
          </div>
          <div id="search">
            <label for=""><i class="fa fa-search" aria-hidden="true"></i></label>
            <input type="text" placeholder="Search contacts..." />
          </div>
          <div id="contacts">
            <ul id="chatlist">
              
            </ul>
          </div>
          <div id="bottom-bar">
            <button id="addcontact"><i class="fa fa-user-plus fa-fw" aria-hidden="true"></i> <span>Add contact</span></button>
            <button id="settings"><i class="fa fa-cog fa-fw" aria-hidden="true"></i> <span>Settings</span></button>
          </div>
        </div>
      
      <div class="content" >
  
                
    
              <div class="mdl-card__supporting-text mdl-color-text--grey-600"  style=" margin-left:33%;width:450px; border-style: solid;
              border-width: 0.5px;" >
              
          <div class="contact-profile" >
              <img id="profilepic" src="https://image.flaticon.com/icons/png/128/149/149071.png" />
              <p id="userName"></p>
              <div class="social-media">
                <i class="fa fa-facebook" aria-hidden="true"></i>
                <i class="fa fa-twitter" aria-hidden="true"></i>
             
              </div>
            </div>
                <div id="messages" >
                    <span id="message-filler"></span>
                </div>
                <form id="message-form" action="#" style=" display: none" >
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label"  >
                    
                      <label class="mdl-textfield__label" for="message"> </label>
                  </div>
                 
                </form>
                <div class="message-input">
                    <div class="wrap">
                    <input type="text" placeholder="Write your message..." id="message" />
                    </div>
                </div>
                <form id="image-form" action="#" style=" display: none">
                  <input id="mediaCapture">
                  <button id="submitImage" >
                      
                  </button>
                </form>
              </div>
    
          </div>
         
            <div id="must-signin-snackbar" class="mdl-js-snackbar mdl-snackbar">
              <div class="mdl-snackbar__text"></div>
              <button class="mdl-snackbar__action" type="button"></button>
            </div>

   
    </div>
  </div>
  

   </div>
   <script src="js/chat.js"></script>
 <script>
      function searchTable() {
      var input, filter, found, table, tr, td, i, j;
      input = document.getElementById("search_patient");
      filter = input.value.toUpperCase();
      table = document.getElementById("chat_list");
      tr = table.getElementsByTagName("tr");
      for (i = 0; i < tr.length; i++) {
          td = tr[i].getElementsByTagName("td");
          for (j = 0; j < td.length; j++) {
              if (td[j].innerHTML.toUpperCase().indexOf(filter) > -1) {
                  found = true;
              }
          }
          if (found) {
              tr[i].style.display = "";
              found = false;
          } else {
              tr[i].style.display = "none";
          }
            }
         }
      </script>   
      <script src="https://www.gstatic.com/firebasejs/4.9.1/firebase.js"></script>
       <script>
    // Initialize Firebase
    var config = {
      apiKey: "AIzaSyDj55UNRaxXD06-MkQxKa2Rc_CFzQWFCwo",
      authDomain: "patient-management-syste-9758b.firebaseapp.com",
      databaseURL: "https://patient-management-syste-9758b.firebaseio.com",
      projectId: "patient-management-syste-9758b",
      storageBucket: "patient-management-syste-9758b.appspot.com",
      messagingSenderId: "776974370251"
    };
    firebase.initializeApp(config);

  function send()
  {
    var mMessage= document.getElementById('message').value; 
    if(mMessage!=""){
      var currentUser="employee01";
    var chatuser=patient;
     var hospital_messages = firebase.database().ref('messages/'+currentUser+"/"+chatuser);
     var patient_messages = firebase.database().ref('messages/'+chatuser+"/"+currentUser);
       var push_id = firebase.database().ref().child('messages').child("currentUser").child(chatuser).push().key;

    hospital_messages.child(push_id).set({
    message:mMessage,
      from:currentUser,
      image:"https://firebasestorage.googleapis.com/v0/b/patient-management-syste-9758b.appspot.com/o/WOOcyRo2f4PAu7TzKMltwS3fvHa2%2Femployee01%2Fh.png?alt=media&token=ae2d626c-d3cf-47d2-9805-27fa2a42f453",
      seen:false,
      time:1522049699143,
      type:"text"
    });
   patient_messages.child(push_id).set({
    message:mMessage,
    image:"https://firebasestorage.googleapis.com/v0/b/patient-management-syste-9758b.appspot.com/o/WOOcyRo2f4PAu7TzKMltwS3fvHa2%2Femployee01%2Fh.png?alt=media&token=ae2d626c-d3cf-47d2-9805-27fa2a42f453",
      from:currentUser,
      seen:false,
      time:1522049699143,
      type:"text"
    });
    }
    
     
    
  }
  $(window).on('keydown', function(e) {
  if (e.which == 13) {
    send();
    return false;
  }
});


  </script>
 

  <script>

  var rootRef = firebase.database().ref("User/patient");
   
   rootRef.on("child_added",snap =>{
    var fname=snap.child("FirstName").val();
    var lname=snap.child("LastName").val();
    var ID=snap.child("ID").val();
    var status=snap.child("Title").val();
    var image=snap.child("image").val();
   var  name=fname+" "+lname;
   console.log(ID);
   var online=snap.child("online").val();
   var classOnline=null;
   if(online=="true"){
    classOnline="\"contact-status online\"";}
   else{
    classOnline="\"contact-status busy\"";}
    $("#chatlist").append(" <li id="+ID+" onclick=\"myfuction(this.id)\" class= \"contact\" ><div class=\"wrap\"><span class="+classOnline+"></span><img src="+image+"> <div class=\"meta\"> <p class=\"name\">"+name+"</p> <p class=\"preview\">"+status+"</p></div></div></li>");

   });

   function myfuction(element)
{
  
    var rootRefDoc = firebase.database().ref().child("User").child("patient").child(element);
    rootRefDoc.on('value',function(snapshot) {
   var PatientName = snapshot.val().FirstName +" " +snapshot.val().LastName;
   var image =snapshot.val().image
    document.getElementById("userName").innerHTML= PatientName
    document.getElementById("user").innerHTML= PatientName
    document.getElementById("profilepic").src = image ;
    document.getElementById("profile-img").src = image ;
   
   
  });
  reload(element);
 
}
window.onload = function() {
   myfuction("G6bcdaC6ZabQIadQpvheH9SnMwA2");
};
  </script>
<script>
  $("tr").click(function() {
    var $td = $(this).closest('tr').children("td"),
        len = $td.length;       

    var tableData = $td.map(function(i) {   
        if(i < len -1)
            return $(this).text();
    }).get();

    console.log(tableData); // ["col #1", "col #2"]
});
</script>



   <header style="background-color: #f5f5f5;width: 800px">
     
        
        <div id="user-container" >
          <div hidden id="user-pic"></div>
          <div hidden id="user-name"></div>
          <button hidden id="sign-out" >
          
          </button>
          <button hidden id="sign-in" >
          
          </button>

    </header>
</div>
