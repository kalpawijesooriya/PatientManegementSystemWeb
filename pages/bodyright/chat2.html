<div class="div_doctor">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Learn how to use the Firebase platform on the Web">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <style>
            table tr:not(:first-child){
                cursor: pointer;transition: all .25s ease-in-out;
            }
            table tr:not(:first-child):hover{background-color: #ddd;}
     </style>
    <!-- Disable tap highlight on IE -->
    <meta name="msapplication-tap-highlight" content="no">

    <!-- Web Application Manifest -->
    <link rel="manifest" href="manifest.json">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Friendly Chat">
    <meta name="theme-color" content="#303F9F">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Friendly Chat">
    <meta name="apple-mobile-web-app-status-bar-style" content="#303F9F">

    <!-- Tile icon for Win8 -->
    <meta name="msapplication-TileColor" content="#3372DF">
    <meta name="msapplication-navbutton-color" content="#303F9F">

    <!-- Material Design Lite -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.1.3/material.orange-indigo.min.css">
    <script defer src="https://code.getmdl.io/1.1.3/material.min.js"></script>

    <!-- App Styling -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">

    <link rel="stylesheet" href="css/chat.css">

   
  </head>

   <div id="block_container">
     <div  id="bloc1" style="width: 500px; margin-left: 20px;">
       <div  class="panel panel-default" style="width: 500px; margin-left: 20px;">
                 <div class="panel-heading">Chat List2</div>
                 <label style=" display:inline-block;" >Search:</label>
                 <input type="search" name="" id="search_patient" onkeyup='searchTable()' class="search">
                 <table class="table table-striped table-bordered table-hover" id="ta" style="b">
                   <thead>
                    <tr>
                      <td  class="th"></td>
                      <td  class="th"></td>
                      <td  class="th"></td>
                     
                    </tr>
                   </thead>
                  <tbody id="chat_list"> </tbody>
                 </table>
         </div>
     </div>

     <div id="bloc2" style="margin-left: 600px; margin-top: -300px">  
     <div id="messages-card-container" class="mdl-cell mdl-cell--12-col mdl-grid" style="margin-left: 600px; margin-top: -300px">
      <div class="demo-layout mdl-layout mdl-js-layout mdl-layout--fixed-header" style="width:1200px" >
       <div  class="panel panel-default" style="width: 400px;">
                 <div class="panel-heading">kalpa</div>
      <div id="messages-card" class="mdl-card mdl-shadow--2dp mdl-cell mdl-cell--12-col mdl-cell--6-col-tablet mdl-cell--6-col-desktop" style="width:400px;height:500px">


              <div class="mdl-card__supporting-text mdl-color-text--grey-600" >
                <div id="messages" >
                    <span id="message-filler"></span>
                </div>
                <form id="message-form" action="#">
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                      <input class="mdl-textfield__input" type="text" id="message">
                      <label class="mdl-textfield__label" for="message">Message...</label>
                  </div>
                  <button id="submit" disabled type="submit" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect">
                    Send
                  </button>
                </form>
                <form id="image-form" action="#">
                  <input id="mediaCapture" type="file" accept="image/*,capture=camera">
                  <button id="submitImage" title="Add an image" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-color--amber-400 mdl-color-text--white">
                       <i class="material-icons">image</i>
                  </button>
                </form>
              </div>
      </div>
          </div>
          </div>
            <div id="must-signin-snackbar" class="mdl-js-snackbar mdl-snackbar">
              <div class="mdl-snackbar__text"></div>
              <button class="mdl-snackbar__action" type="button"></button>
            </div>

    </div>
    </div>
     </div>

   </div>

 <script>
      function searchTable() {
      var input, filter, found, table, tr, td, i, j;
      input = document.getElementById("search_patient");
      filter = input.value.toUpperCase();
      table = document.getElementById("chat_list");
      tr = table.getElementsByTagName("tr");
      for (i = 0; i < tr.length; i++) {
          td = tr[i].getElementsByTagName("td");
          for (j = 0; j < td.length; j++) {
              if (td[j].innerHTML.toUpperCase().indexOf(filter) > -1) {
                  found = true;
              }
          }
          if (found) {
              tr[i].style.display = "";
              found = false;
          } else {
              tr[i].style.display = "none";
          }
            }
         }
      </script>   
      <script src="https://www.gstatic.com/firebasejs/4.9.1/firebase.js"></script>
       <script>
    // Initialize Firebase
    var config = {
      apiKey: "AIzaSyDj55UNRaxXD06-MkQxKa2Rc_CFzQWFCwo",
      authDomain: "patient-management-syste-9758b.firebaseapp.com",
      databaseURL: "https://patient-management-syste-9758b.firebaseio.com",
      projectId: "patient-management-syste-9758b",
      storageBucket: "patient-management-syste-9758b.appspot.com",
      messagingSenderId: "776974370251"
    };
    firebase.initializeApp(config);

  function send()
  {
    var mMessage= document.getElementById('message').value;
    var currentUser="employee01";
    var chatuser="G6bcdaC6ZabQIadQpvheH9SnMwA2";
     var hospital_messages = firebase.database().ref('messages/'+currentUser+"/"+chatuser);
     var patient_messages = firebase.database().ref('messages/'+chatuser+"/"+currentUser);
       var push_id = firebase.database().ref().child('messages').child("currentUser").child(chatuser).push().key;

    hospital_messages.child(push_id).set({
    message:mMessage,
      from:currentUser,
      seen:false,
      time:1522049699143,
      type:"text"
    });
   patient_messages.child(push_id).set({
    message:mMessage,
      from:currentUser,
      seen:false,
      time:1522049699143,
      type:"text"
    });
     
    
  }



  </script>
   

  <script>


      var rootRef = firebase.database().ref("User/patient");
   
   rootRef.on("child_added",snap =>{
    var fname=snap.child("FirstName").val();
    var lname=snap.child("LastName").val();
    var ID=snap.child("LastName").val();
    var status=snap.child("Title").val();
   var  name=fname+" "+lname;
    // div.querySelector('.pic').style.backgroundImage = 'url(' + picUrl + ')';
    //var lname=snap.child("DocotID").val();

    $("#chat_list").append("<tr><td>"+ID+"</td><td>"+name+"</td><td>"+status+"</td></tr>");

   });

  </script>
<script>
  $("tr").click(function() {
    var $td = $(this).closest('tr').children("td"),
        len = $td.length;       

    var tableData = $td.map(function(i) {   
        if(i < len -1)
            return $(this).text();
    }).get();

    console.log(tableData); // ["col #1", "col #2"]
});
</script>
  <script src="js/chat.js"></script>
   <header style="background-color: #f5f5f5;width: 800px">
     
        
        <div id="user-container" >
          <div hidden id="user-pic"></div>
          <div hidden id="user-name"></div>
          <button hidden id="sign-out" >
          
          </button>
          <button hidden id="sign-in" >
          
          </button>
       
   
    </header>
</div>
